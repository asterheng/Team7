<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Login | CSR Portal</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#64748b;
      --border:#e5e7eb;
      --primary:#2563eb;
    }
    *{box-sizing:border-box}
    body{
      font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      margin:0;
      display:flex;
      align-items:center;
      justify-content:center;
      height:100vh;
    }
    .auth-card{
      width:100%;
      max-width:420px;
      background:var(--card);
      border-radius:16px;
      padding:2rem;
      box-shadow:0 10px 40px rgba(0,0,0,0.2);
      text-align:center;
    }
    h2{margin-top:0;font-size:1.6rem;color:var(--text)}
    p.sub{color:var(--muted);margin-bottom:1.5rem}

    .flash-list{list-style:none;padding:0;margin:0 0 1rem 0}
    .flash{padding:.6rem .75rem;border-radius:.6rem;margin-bottom:.5rem;font-size:.95rem}
    .flash.ok{background:#ecfdf5;color:#065f46}
    .flash.error,.flash.err{background:#fef2f2;color:#991b1b}

    form{display:flex;flex-direction:column;gap:1rem;text-align:left}
    label span{display:block;margin-bottom:.3rem;font-weight:600}
    input{
      width:100%;padding:.75rem .8rem;border:1px solid var(--border);
      border-radius:10px;font-size:1rem;outline:none;
    }
    input:focus{border-color:#93c5fd;box-shadow:0 0 0 3px rgba(37,99,235,0.15)}

    .pwd-wrap{position:relative;display:flex;align-items:center}
    .pwd-wrap input{padding-right:4rem}
    .toggle{
      position:absolute;right:.5rem;top:50%;transform:translateY(-50%);
      border:none;background:none;color:var(--muted);
      cursor:pointer;font-size:.85rem;
    }

    .submit{
      background:var(--primary);
      color:#fff;font-weight:600;
      border:none;border-radius:10px;
      padding:.8rem;cursor:pointer;
      transition:background .2s;
    }
    .submit:hover{background:#1d4ed8}

    footer{
      margin-top:1.5rem;
      color:var(--muted);
      font-size:.85rem;
    }
  </style>
</head>
<body>
  <div class="auth-card">
    <h2>Welcome back</h2>
    <p class="sub">Sign in to continue</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flash-list">
          {% for category, message in messages %}
            <li class="flash {{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="post" novalidate>
      <label>
        <span>Email</span>
        <input type="email" name="email" placeholder="you@example.com" value="{{ email or '' }}" required>
      </label>

      <label>
        <span>Password</span>
        <div class="pwd-wrap">
          <input type="password" id="pwd" name="password" placeholder="••••••••" required>
          <button type="button" class="toggle" onclick="togglePwd()">Show</button>
        </div>
      </label>

      <button type="submit" class="submit">Log in</button>
    </form>

    <footer>CSR Portal &copy; {{ now().year if now else '2025' }}</footer>
  </div>

  <script>
    function togglePwd(){
      const input=document.getElementById('pwd');
      const btn=document.querySelector('.toggle');
      if(input.type==='password'){input.type='text';btn.textContent='Hide';}
      else{input.type='password';btn.textContent='Show';}
    }
  </script>
</body>
</html>
