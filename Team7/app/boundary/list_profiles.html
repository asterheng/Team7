
{% extends "base.html" %}
{% block content %}
<h2>Profiles</h2>
{% with messages = get_flashed_messages(with_categories=true,
      category_filter=['list_profile:ok']) %}
  {% if messages %}
    <ul class="flashes">
      {% for category, message in messages %}
        {% set cat = category.split(':')[-1] %}
        <li class="{{ cat }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="get" class="search-bar" autocomplete="off">
  <input type="text" name="q" placeholder="Search name or descriptionâ€¦" value="{{ q or '' }}">
  <button type="submit">Search</button>
  {% if q %}
    <a class="btn reset" href="{{ url_for('boundary.list_profiles') }}">Reset</a>
  {% endif %}
</form>

<table>
  <thead><tr><th>ID</th><th>Name</th><th>Description</th><th>Suspended</th><th>Update</th></tr></thead>
  <tbody>
    {% for p in profiles %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.name }}</td>
      <td>{{ p.description }}</td>
      <td>{{ 'Yes' if p.is_suspended else 'No' }}</td>
	  <td><a href="{{ url_for('boundary.edit_profile', profile_id=p.id) }}">Edit</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<style>
  .flashes{list-style:none;padding:0;margin:1rem 0;text-align:center}
  .flashes li{display:inline-block;padding:.7rem 1rem;border-radius:10px;margin:.25rem}
  .flashes .ok{background:#d1fae5;border:1px solid #10b981;color:#065f46}
  .flashes .err{background:#fee2e2;border:1px solid #ef4444;color:#991b1b}
  .search-bar{display:flex;gap:.5rem;align-items:center;margin:.8rem 0 1.2rem}
  .search-bar input{
    flex:1; padding:.65rem .9rem; border-radius:10px; border:1px solid #cbd5e1; background:#f8fafc;
    font-size:1rem; transition:border-color .2s, box-shadow .2s;
  }
  .search-bar input:focus{border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.2); outline:none; background:#fff}
  .search-bar button, .search-bar .reset{
    padding:.65rem 1rem; border-radius:10px; border:1px solid #cbd5e1; background:#f1f5f9; color:#0f172a; text-decoration:none;
    cursor:pointer; font-weight:600;
  }
  .search-bar button{background:linear-gradient(135deg,#2563eb,#1d4ed8); border:none; color:#fff}
  .search-bar button:hover{filter:brightness(1.06)}
  .table{width:100%; border-collapse:collapse}
  .table th,.table td{padding:.6rem .8rem; border-bottom:1px solid #e2e8f0; text-align:left}
</style>
{% endblock %}
